function ecoStart(){if(_adReady)eco.time.eco=(new Date).getTime(),eco.heatmap(),eco.impression.getAll(),eco.queue.runQueue();else var readyStateCheckInterval=setInterval(function(){_adReady&&(clearInterval(readyStateCheckInterval),eco.time.eco=(new Date).getTime(),eco.heatmap(),eco.impression.getAll(),eco.queue.runQueue())},500)}var _docReady=!1,_adReady=!1,_prodReady=!1,_debugMode=!1;!function(i,s,o,g,r,a,m){i.GoogleAnalyticsObject=r,i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date,a=s.createElement(o),m=s.getElementsByTagName(o)[0],a.async=1,a.src=g,m.parentNode.insertBefore(a,m)}(window,document,"script","js/analytics.js","ecoAnalytic"),!function(a){var b=/iPhone/i,c=/iPod/i,d=/iPad/i,e=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,f=/Android/i,g=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,h=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,i=/IEMobile/i,j=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,k=/BlackBerry/i,l=/BB10/i,m=/Opera Mini/i,n=/(CriOS|Chrome)(?=.*\bMobile\b)/i,o=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,p=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),q=function(a,b){return a.test(b)},r=function(a){var r=a||navigator.userAgent,s=r.split("[FBAN");return"undefined"!=typeof s[1]&&(r=s[0]),this.apple={phone:q(b,r),ipod:q(c,r),tablet:!q(b,r)&&q(d,r),device:q(b,r)||q(c,r)||q(d,r)},this.amazon={phone:q(g,r),tablet:!q(g,r)&&q(h,r),device:q(g,r)||q(h,r)},this.android={phone:q(g,r)||q(e,r),tablet:!q(g,r)&&!q(e,r)&&(q(h,r)||q(f,r)),device:q(g,r)||q(h,r)||q(e,r)||q(f,r)},this.windows={phone:q(i,r),tablet:q(j,r),device:q(i,r)||q(j,r)},this.other={blackberry:q(k,r),blackberry10:q(l,r),opera:q(m,r),firefox:q(o,r),chrome:q(n,r),device:q(k,r)||q(l,r)||q(m,r)||q(o,r)||q(n,r)},this.seven_inch=q(p,r),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window?this:void 0},s=function(){var a=new r;return a.Class=r,a};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=r:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=s():"function"==typeof define&&define.amd?define("isMobile",[],a.isMobile=s()):a.isMobile=s()}(this),function(global){var ecoClass=function(){var _timestamp=function(url,timestamp){var a;return void 0!==timestamp?(a=url.replace(timestamp,function(){return Math.round((new Date).getTime()/1e3)}),(new Image).src=a):(a=url,(new Image).src=a)},_orientationCheck=function(){return window.innerWidth>window.innerHeight?"landscape":"portrait"};this.config=function(){var param={};return{app:function(values){return param.app=values,this},advertiser:function(values){return param.advertiser=values,this},campaign:function(values){return param.campaign=values,this},issue:function(values){return param.issue=values,this},ga:function(values){return param.ga=values,this},gaClient:function(values){return param.gaClient=values,this},getProperty:function(property){return param[property]},getCampaign:function(){var a=param.app+"|"+param.advertiser+"|"+param.campaign+"|"+param.issue;return a.toLowerCase()},getAll:function(){console.log((new Date).getTime()-eco.time.load+"ms: configuration detail",param)}}}(),this.impression=function(){var impression={};return{phone:function(url){return impression.phone=url,this},tablet:function(url){return impression.tablet=url,this},timestamp:function(macro){return impression.timestamp=macro,this},timestampValue:function(){return impression.timestamp},getAll:function(){return impression.phone&&void 0!==impression.tablet?void 0!==impression.timestamp?isMobile.phone?(eco.sendGA("ad","view",eco.time.view(),"nonInteraction"),_timestamp(impression.phone,impression.timestamp)):(eco.sendGA("ad","view",eco.time.view(),"nonInteraction"),_timestamp(impression.tablet,impression.timestamp)):isMobile.phone?(eco.sendGA("ad","view",eco.time.view(),"nonInteraction"),_timestamp(impression.phone,impression.timestamp)):(eco.sendGA("ad","view",eco.time.view(),"nonInteraction"),_timestamp(impression.tablet,impression.timestamp)):void eco.sendGA("ad","view",eco.time.view(),"nonInteraction")},check:function(){console.log((new Date).getTime()-eco.time.load+"ms: impression detail",impression)}}}(),this.heatmap=function(){document.addEventListener("click",function(event){var x=event.pageX,y=event.pageY,tracking={x:x,y:y,o:_orientationCheck()};eco.sendGA("heatmap",JSON.stringify(tracking),eco.time.action(),"nonInteraction")})},this.open=function(url,tabletOptUrl){isMobile.phone?_prodReady?(window.location="internal-"+url,eco.sendGA("external",url,eco.time.action())):(window.location=url,eco.sendGA("external",url,eco.time.action())):void 0!==tabletOptUrl?_prodReady?(window.location="internal-"+tabletOptUrl,eco.sendGA("external",tabletOptUrl,eco.time.action())):(window.location=tabletOptUrl,eco.sendGA("external",tabletOptUrl,eco.time.action())):_prodReady?(window.location="internal-"+url,eco.sendGA("external",url,eco.time.action())):(window.location=url,eco.sendGA("external",url,eco.time.action()))},this.video=function(video,poster){var myVideo=document.getElementById(video),myDuration=function(){return Math.floor(myVideo.duration)},myTime=function(){return Math.floor(myVideo.currentTime)},myQuartile=function(){return Math.floor(100*(myTime()/myDuration()))},played=0;return poster=document.getElementById(poster),myVideo.addEventListener("timeupdate",function(){myQuartile()>25&&(eco.sendGA("video","firstQuartile: "+myVideo.currentSrc,myQuartile(),"nonInteraction"),this.removeEventListener("timeupdate",arguments.callee))}),myVideo.addEventListener("timeupdate",function(){myQuartile()>50&&(eco.sendGA("video","secondQuartile: "+myVideo.currentSrc,myQuartile(),"nonInteraction"),this.removeEventListener("timeupdate",arguments.callee))}),myVideo.addEventListener("timeupdate",function(){myQuartile()>75&&(eco.sendGA("video","thirdQuartile: "+myVideo.currentSrc,myQuartile(),"nonInteraction"),this.removeEventListener("timeupdate",arguments.callee))}),myVideo.addEventListener("play",function(){0===played?(played++,eco.sendGA("video","play: "+myVideo.currentSrc,eco.time.action())):(myVideo.play(),eco.sendGA("video","resume: "+myVideo.currentSrc,myQuartile()))},!1),myVideo.addEventListener("pause",function(){myQuartile()<100&&eco.sendGA("video","pause: "+myVideo.currentSrc,myQuartile())},!1),myVideo.addEventListener("ended",function(){played=0,eco.sendGA("video","ended: "+myVideo.currentSrc,myQuartile(),"nonInteraction"),document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()},!1),document.addEventListener("webkitfullscreenchange",function(e){var isInFullScreen=!!(document.fullscreenElement||document.msFullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement);isInFullScreen||myVideo.pause()}),null!==poster&&poster.addEventListener("click",function(){myVideo.play()},!1),this},this.event=function(action,optUrl){return optUrl&&void 0!==eco.impression.timestampValue()?(_timestamp(optUrl,eco.impression.timestampValue()),eco.sendGA("custom",action,eco.time.action())):void 0!==optUrl?(_timestamp(optUrl),eco.sendGA("custom",action,eco.time.action())):eco.sendGA("custom",action,eco.time.action()),this},this.queue=function(){var queue=[];return{addTask:function(fn){return queue.push(fn),this},getQueue:function(){queue.forEach(function(item,index){return console.log((new Date).getTime()-eco.time.load+"ms: task "+index+"\n",item),index})},runQueue:function(){for(_debugMode&&queue.forEach(function(item,index){});queue.length>0;)queue.shift()()}}}(),this.ad={debug:function(){_debugMode=!0,console.log((new Date).getTime()-eco.time.load+"ms: debug mode on"),eco.config.getAll(),eco.impression.check(),eco.queue.getQueue();var readyStateCheckInterval=setInterval(function(){console.log((new Date).getTime()-eco.time.load+"ms: ecoStart waiting"),_docReady&&(clearInterval(readyStateCheckInterval),_adReady=!0,ecoStart(),console.log((new Date).getTime()-eco.time.load+"ms: ecoStart complete"))},500)},run:function(){_prodReady=!0;var readyStateCheckInterval=setInterval(function(){_docReady&&(clearInterval(readyStateCheckInterval),_adReady=!0)},500)}},this.time={view:function(){return Math.floor(((new Date).getTime()-this.load)/1e3)},action:function(){return Math.floor(((new Date).getTime()-this.eco)/1e3)}},this.sendGA=function(category,action,value,nonInteraction){_debugMode&&console.log(category,action,value,nonInteraction),void 0!==nonInteraction?void 0!==eco.config.getProperty("gaClient")?(ecoAnalytic("send","event",category,action,eco.config.getCampaign(),value,{nonInteraction:!0}),ecoAnalytic("clientTracker.send","event",category,action,eco.config.getCampaign(),value,{nonInteraction:!0})):ecoAnalytic("send","event",category,action,eco.config.getCampaign(),value,{nonInteraction:!0}):void 0!==eco.config.getProperty("gaClient")?(ecoAnalytic("send","event",category,action,eco.config.getCampaign(),value),ecoAnalytic("clientTracker.send","event",category,action,eco.config.getCampaign(),value)):ecoAnalytic("send","event",category,action,eco.config.getCampaign(),value)}},instantiate=function(){var ECO=new ecoClass;return ECO.class=ecoClass,ECO};global.eco=instantiate(),eco.time.load=(new Date).getTime()}(this),document.onreadystatechange=function(){switch(document.readyState){case"interactive":_prodReady!==!1?eco.config.ga("UA-69628544-11"):eco.config.ga("UA-69628544-10"),ecoAnalytic("create",eco.config.getProperty("ga"),"auto"),_debugMode!==!1&&ecoAnalytic(function(tracker){}),ecoAnalytic("set","checkProtocolTask",null),ecoAnalytic("set","checkStorageTask",null),ecoAnalytic("send","screenview",{appName:eco.config.getProperty("app"),screenName:eco.config.getCampaign()}),void 0!==eco.config.getProperty("gaClient")&&(ecoAnalytic("create",eco.config.getProperty("gaClient"),"auto","clientTracker"),_debugMode!==!1&&ecoAnalytic(function(clientTracker){}),ecoAnalytic("clientTracker.set","checkProtocolTask",null),ecoAnalytic("clientTracker.set","checkStorageTask",null),ecoAnalytic("clientTracker.send","pageview")),eco.sendGA("ad","load","0","nonInteraction"),"onpagehide"in window?window.addEventListener("pagehide",function(){ecoAnalytic("send","event","ad","hide",eco.config.getCampaign(),eco.time.action(),{nonInteraction:!0}),void 0!==eco.config.getProperty("gaClient")&&ecoAnalytic("clientTracker.send","event","ad","hide",eco.config.getCampaign(),eco.time.action(),{nonInteraction:!0})},!1):window.addEventListener("unload",function(){ecoAnalytic("send","event","ad","hide",eco.config.getCampaign(),eco.time.action(),{nonInteraction:!0}),void 0!==eco.config.getProperty("gaClient")&&ecoAnalytic("clientTracker.send","event","ad","hide",eco.config.getCampaign(),eco.time.action(),{nonInteraction:!0})},!1);break;case"complete":_docReady=!0}};